<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Creat an Account</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
</head>
<body>
    <form id="newUser">
        First name:<br>
        <input type="text" name="firstname" placeholder="John Jacob" id="firstName"><br>
        Last name:<br>
        <input type="text" name="lastname" placeholder="Jingleheimer Schmidt" id="lastName"><br>
        E-mail Address:<br>
        <input type="text" name="email" placeholder="JJJS4Eva@yahoo.com" id="email"><br>
        Password (must be at least 8 characters long):<br>
        <input type="password" name="newPassword" placeholder="********" id="newPassword"><br>
        Confirm Password:<br>
        <input type="password" name="confirmPassword" placeholder="********" id="confirmPassword"><br>
        <input type="submit" id="regButton">
    </form>

<script>
    var mysql = require("mysql");
    
    var conn = mysql.createConnection({
        host: "localhost",
        user: "root",
        password: "burgerPass",
        database: "cozy_couch_db"
    });

    $("#regButton").on("click", function(event) {
        event.preventDefault();
        let firstName = $("#firstName").val().trim();
        let lastName = $("#lastName").val().trim();
        let email = $("#email").val().trim();
        let newPassword = $("#newPassword").val().trim();
        let confirmPassword = $("#confirmPassword").val().trim();
        if (newPassword !== confirmPassword) {
            alert("Your passwords must match.")
        } else {
            $("#firstName").val("");
            $("#lastName").val("");
            $("#email").val("");
            $("#newPassword").val("");
            $("#confirmPassword").val("");
            
            conn.connect(function(err) {
                if (err) throw err;
                console.log("Connected!");
                var sql = `INSERT INTO login (firstName, lastName, email, pw) VALUES ('${firstName}', '${lastName}', '${email}', '${newPassword}')`;
                conn.query(sql, function (err, result) {
                if (err) throw err;
                console.log("Account successfully created!");
                });
            });
        };
    });
</script s>

</body>
</html>